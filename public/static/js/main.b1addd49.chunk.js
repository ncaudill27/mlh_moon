(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports=n.p+"static/media/space_music.c18e0401.mp3"},function(e,t,n){e.exports=n.p+"static/media/ship.89a60ce9.png"},function(e,t,n){e.exports=n(19)},,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(7),i=n.n(o),c=(n(16),n(1)),s=n(3),l=n(5),u=n(4),d=(n(17),n(8)),h=n(9),m=n.n(h),f=n(10),p=n.n(f),v=n(2),g=function(e,t){var n=document.documentElement.scrollWidth-139,r=document.documentElement.scrollHeight-139;return t<0?t=0:e<0?e=0:t>n?t=n:e>r&&(e=r),[e,t]},y=function(e,t){var n,r=t.orientation,a=65===e.keyCode,o=68===e.keyCode;return a?r-=10:o&&(r+=10),r>359?r=0:r<0&&(r=358),n=r+"deg",document.documentElement.style.setProperty("--orientation",n),r},w=function(e,t){var n=t.orientation,r=t.top,a=t.left,o=87===e.keyCode;if(n=y(e,{orientation:n}),o){var i=function(e,t,n){switch(!0){case 0<=e&&e<=90:window.scroll({top:t-=90-e,left:n+=e,behavior:"smooth"});var r=g(t,n),a=Object(v.a)(r,2);return[e,t=a[0],n=a[1]];case 90<e&&e<=180:window.scroll({top:t+=90-Math.abs(180-e),left:n+=180-e,behavior:"smooth"});var o=g(t,n),i=Object(v.a)(o,2);return[e,t=i[0],n=i[1]];case 180<e&&e<=270:window.scroll({top:t+=270-e,left:n-=90-Math.abs(270-e),behavior:"smooth"});var c=g(t,n),s=Object(v.a)(c,2);return[e,t=s[0],n=s[1]];case 270<e&&e<=359:window.scroll({top:t-=90-Math.abs(360-e),left:n-=90-Math.abs(270-e),behavior:"smooth"});var l=g(t,n),u=Object(v.a)(l,2);return[e,t=u[0],n=u[1]]}}(n,r,a),c=Object(v.a)(i,3);n=c[0],r=c[1],a=c[2]}return{orientation:n,top:r,left:a}},S=function(){var e=getComputedStyle(document.documentElement).getPropertyValue("--orientation").slice(1,3);return parseInt(e,10)},E=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={orientation:S(),top:document.documentElement.clientTop,left:document.documentElement.clientLeft},e.shipBoundaries=function(){return document.getElementById("Ship").getBoundingClientRect()},e.handleMovement=function(t){e.setState(w(t,e.state)),e.props.findShip(e.shipBoundaries())},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){document.getElementById("Ship").focus()}},{key:"render",value:function(){return a.a.createElement("div",{onKeyDown:this.handleMovement},a.a.createElement("img",{tabIndex:"1",src:p.a,alt:"Ship",id:"Ship"}))}}]),n}(r.Component);var b=function(e){var t=e.water,n=e.medicine,r=e.food,o=e.top,i=e.left,c=e.size,s=e.id,l={backgroundColor:"rgb(".concat(n,", ").concat(r,", ").concat(t,")"),width:"".concat(c,"px"),height:"".concat(c,"px"),position:"absolute",top:"".concat(o,"px"),left:"".concat(i,"px")};return a.a.createElement("div",{className:"Planet",id:s,style:l})};var I=function(e){var t=e.resource,n=e.amount,r={backgroundColor:function(e){switch(e){case"medicine":return"red";case"water":return"cyan";case"food":return"yellow"}}(t),width:function(e){return e+"px"}(n),height:"20px"};return a.a.createElement("div",{className:"Status-bar",style:r},a.a.createElement("p",{style:{padding:"0 5px",margin:"0",color:"black"}},t.charAt(0).toUpperCase()+t.slice(1)))};var O=function(e){var t=e.water,n=e.medicine,r=e.food;return a.a.createElement("div",{className:"HUD"},t<300||n<300||r<300?a.a.createElement("h2",{id:"warning"},"HURRY!! YOU'RE RUNNING LOW ON SUPPLIES!"):null,a.a.createElement(I,{resource:"water",amount:t}),a.a.createElement(I,{resource:"food",amount:r}),a.a.createElement(I,{resource:"medicine",amount:n}))};var C=function(e){var t=e.score,n=e.isHighScore,o=e.submitHighScore,i=Object(r.useState)(""),c=Object(v.a)(i,2),s=c[0],l=c[1],u=n?"HIGH SCORE!!!":"GAME OVER",d=a.a.createElement("form",{onSubmit:function(e){return o(s,e)},autoComplete:"off"},a.a.createElement("label",null,"Name"),a.a.createElement("input",{id:"name",type:"text",name:"name",value:s,onChange:function(){var e=document.getElementById("name").value;l(e)},required:!0}),a.a.createElement("input",{type:"hidden",name:"score",value:t}),a.a.createElement("input",{type:"submit"}));return a.a.createElement("div",{className:"Game-over"},a.a.createElement("h1",{style:{margin:"0 auto",padding:"10px 0"}},u),a.a.createElement("h2",{style:{margin:"0 auto",padding:"10px 0"}},"Score - ",t),n?d:a.a.createElement("button",{onClick:function(){return window.history.go(0)}},"Try Again"))},H=function(e){for(var t=1;t<=e;t++)new k(t);return k.all};function j(e,t){return Math.floor(Math.random()*(t-e)+e)}var k=function e(t){var n=this;Object(c.a)(this,e),this.determineType=function(){var e={water:n.water,medicine:n.medicine,food:n.food},t=0,r=null;for(var a in e)e[a]>t&&(t=e[a],r=a);return r},this.isDepleted=function(){return n.water<10||n.food<10||n.medicine<10},this.transferResources=function(){var e=.05*n.water+2,t=.05*n.food+2,r=.05*n.medicine+2;return n.water-="water"===n.type?2*e:e,n.food-="food"===n.type?2*t:t,n.medicine-="medicine"===n.type?2*r:r,!n.isDepleted()&&{water:e,food:t,medicine:r}},this.stopTransfer=function(){return clearInterval(n.transferId)},this.setCollisionBoundaries=function(){n.DOMelement=document.getElementById(n.id),n.boundaries=n.stripBoundingClientFunctions(n.DOMelement.getBoundingClientRect())},this.stripBoundingClientFunctions=function(e){var t={};for(var n in e)"function"!==typeof e[n]&&(t[n]=e[n]);return t},this.findCollision=function(e){n.setCollisionBoundaries();var t=n.boundaries,r=t.x,a=t.y,o=t.width,i=t.height;return e.x<r+o&&e.x+e.width>r&&e.y<a+i&&e.y+e.height>a},this.id=t,this.water=Math.floor(255*Math.random())+1,this.medicine=Math.floor(255*Math.random())+1,this.food=Math.floor(255*Math.random())+1,this.top=j(700,15e3),this.left=j(700,15e3),this.size=j(300,700),this.planetType=this.determineType(),e.all.push(this)};k.all=[];var M=function(e){return fetch("/api/v1/high_scores",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()}))},N=new d.Howl({src:[m.a],loop:!0,volume:.4}),x=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={gameOver:!1,planetsArray:[],shipBoundaries:{},medicine:1e3,food:1e3,water:1e3,score:0,isHighScore:!1},e.componentDidMount=function(){N.play(),e.generatePlanets(),e.decayId=setInterval(e.decayResources,100),e.scoreId=setInterval(e.addPoint,10)},e.losingCondition=function(){var t=e.state,n=t.medicine,r=t.food,a=t.water;return n<=0||(r<=0||a<=0)},e.gameOver=function(){clearInterval(e.decayId),clearInterval(e.scoreId),e.setState({gameOver:!0}),N.stop(),e.isHighScore&&e.setState({isHighScore:!0})},e.isHighScore=function(){return!e.props.highScores.length||e.props.highScores.some((function(t){return e.state.score>t.score}))},e.submitHighScore=function(t,n){n.preventDefault();var r={name:t,score:e.state.score};M(r).then((function(t){return e.props.addHighScore(t)}))},e.decayResources=function(){e.losingCondition()&&e.gameOver(),e.setState((function(e){return{medicine:e.medicine-25,food:e.food-25,water:e.water-25}}))},e.stopDecay=function(){return clearInterval(e.decayId)},e.addPoint=function(){return e.setState((function(e){return{score:e.score+1}}))},e.findShip=function(t){e.state.planetsArray.map((function(n){n.findCollision(t)&&!n.transferId&&n.transferResources()?n.transferId=setInterval((function(){return e.beginTransfer(n)}),250):n.isDepleted()&&n.stopTransfer()})),e.setState({shipBoundaries:t})},e.beginTransfer=function(t){var n=t.transferResources(),r=n.water,a=n.food,o=n.medicine;r&&a&&o&&e.setState((function(e){return{water:e.water+r,food:e.food+a,medicine:e.medicine+o}}))},e.generatePlanets=function(){var t=H(80);e.setState({planetsArray:t})},e.renderPlanets=function(){return e.state.planetsArray.map((function(e){return a.a.createElement(b,e)}))},e}return Object(s.a)(n,[{key:"componentWillUnmount",value:function(){clearInterval(this.decayId),clearInterval(this.scoreId),this.state.planetsArray.map((function(e){return clearInterval(e.transferId)})),N.stop()}},{key:"render",value:function(){var e=this.state,t=e.water,n=e.food,r=e.medicine;return a.a.createElement("div",{className:"Universe"},a.a.createElement("button",{id:"mute",onClick:function(){return N.volume(0)}},"MUTE"),a.a.createElement(E,{findShip:this.findShip}),this.state.planetsArray.length?this.renderPlanets():null,a.a.createElement(O,{water:t,food:n,medicine:r}),this.state.gameOver?a.a.createElement(C,{score:this.state.score,isHighScore:this.state.isHighScore,submitHighScore:this.submitHighScore}):null)}}]),n}(r.Component),B=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={highScores:[],view:"intro"},e.toIntro=function(){return e.setState({view:"intro"})},e.startGame=function(){return e.setState({view:"universe"})},e.renderIntro=function(){return a.a.createElement("div",{className:"intro"},a.a.createElement("div",{className:"copy"},a.a.createElement("h1",null,"Welcome to Hack the Planet!"),a.a.createElement("p",null,"Greetings, hero! You are the last hope for humanity. Please, stay alive so we can reach for the stars."),a.a.createElement("p",null,"Objectives: maintain resources by flying over planets."),a.a.createElement("p",null,"Controls:"),a.a.createElement("p",null,"'W' key propels your ship forward. Hold down w at your own risk!"),a.a.createElement("p",null,"'A' key rotates to the left."),a.a.createElement("p",null,"'D' key rotates to the right."),a.a.createElement("button",{id:"startbutton",onClick:e.startGame},"Start")),a.a.createElement("div",{className:"highscores"},a.a.createElement("h1",null,"High Scores"),a.a.createElement("div",{className:"scores"},e.state.highScores.length?e.renderHighScores():null)))},e.renderHighScores=function(){return e.state.highScores.map((function(e,t){var n=e.name,r=e.score;return a.a.createElement("div",{className:"highscore"},a.a.createElement("h3",null,t+1,") ",n," - ",r))}))},e.switch=function(){switch(e.state.view){case"intro":return e.renderIntro();case"universe":return a.a.createElement(x,{highScores:e.state.highScores,addHighScore:e.addHighScore})}},e.addHighScore=function(t){e.toIntro();var n=e.placeNewHighScore(t);e.setState({highScores:n})},e.placeNewHighScore=function(t){var n=e.state.highScores.concat(t);return n.sort((function(e,t){return e.score<t.score?1:-1})),n.slice(0,11)},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/v1/high_scores").then((function(e){return e.json()})).then((function(e){return e})).then((function(t){return e.setState({highScores:t})}))}},{key:"render",value:function(){return a.a.createElement("div",{className:"App"},this.switch())}}]),n}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[11,1,2]]]);
//# sourceMappingURL=main.b1addd49.chunk.js.map